<!-- Status Overview -->
<div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
    <div class="bg-white rounded-lg shadow p-6 dark:bg-gray-700">
        <div class="flex items-center">
            <div class="p-3 bg-green-100 rounded-full dark:bg-green-900">
                <i class="fas fa-check-circle text-green-600 text-xl dark:text-green-400"></i>
            </div>
            <div class="ml-4">
                <p class="text-sm text-gray-600 dark:text-gray-300">Active Pipelines</p>
                <p class="text-2xl font-bold text-gray-900 dark:text-white">3</p>
            </div>
        </div>
    </div>
    <div class="bg-white rounded-lg shadow p-6 dark:bg-gray-700">
        <div class="flex items-center">
            <div class="p-3 bg-blue-100 rounded-full dark:bg-blue-900">
                <i class="fas fa-database text-blue-600 text-xl dark:text-blue-400"></i>
            </div>
            <div class="ml-4">
                <p class="text-sm text-gray-600 dark:text-gray-300">Records Processed</p>
                <p class="text-2xl font-bold text-gray-900 dark:text-white">1,247</p>
            </div>
        </div>
    </div>
    <div class="bg-white rounded-lg shadow p-6 dark:bg-gray-700">
        <div class="flex items-center">
            <div class="p-3 bg-yellow-100 rounded-full dark:bg-yellow-900">
                <i class="fas fa-clock text-yellow-600 text-xl dark:text-yellow-400"></i>
            </div>
            <div class="ml-4">
                <p class="text-sm text-gray-600 dark:text-gray-300">Avg Processing Time</p>
                <p class="text-2xl font-bold text-gray-900 dark:text-white">234ms</p>
            </div>
        </div>
    </div>
    <div class="bg-white rounded-lg shadow p-6 dark:bg-gray-700">
        <div class="flex items-center">
            <div class="p-3 bg-purple-100 rounded-full dark:bg-purple-900">
                <i class="fas fa-chart-line text-purple-600 text-xl dark:text-purple-400"></i>
            </div>
            <div class="ml-4">
                <p class="text-sm text-gray-600 dark:text-gray-300">Success Rate</p>
                <p class="text-2xl font-bold text-gray-900 dark:text-white">99.2%</p>
            </div>
        </div>
    </div>
</div>

<!-- Pipelines Section -->
<div class="mb-8">
    <div class="flex justify-between items-center mb-4">
        <h2 class="text-lg font-semibold text-gray-900 dark:text-white">Active Pipelines</h2>
        <button hx-get="/api/pipelines" hx-target="#pipelines-container" hx-swap="innerHTML" class="text-sm text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300">
            <i class="fas fa-sync mr-1"></i> Reload Pipelines
        </button>
    </div>
    <div id="pipelines-container">
        <!-- Pipeline cards will be loaded here -->
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
            <!-- Pipeline 1 -->
            <div class="pipeline-card bg-white rounded-lg shadow dark:bg-gray-700">
                <div class="p-6">
                    <div class="flex justify-between items-start mb-4">
                        <div>
                            <h3 class="text-lg font-semibold text-gray-900 dark:text-white">SpaceDev News</h3>
                            <p class="text-sm text-gray-600 dark:text-gray-300">HTTP → File</p>
                        </div>
                        <div class="flex items-center">
                            <span class="pulse-dot w-2 h-2 bg-green-500 rounded-full mr-2"></span>
                            <span class="text-sm text-green-600 font-medium dark:text-green-400">Active</span>
                        </div>
                    </div>
                    <div class="space-y-3">
                        <div class="flex justify-between text-sm">
                            <span class="text-gray-600 dark:text-gray-300">Source:</span>
                            <span class="font-medium dark:text-gray-200">spaceflightnewsapi.net</span>
                        </div>
                        <div class="flex justify-between text-sm">
                            <span class="text-gray-600 dark:text-gray-300">Destination:</span>
                            <span class="font-medium dark:text-gray-200">./tests/data/stream/</span>
                        </div>
                        <div class="flex justify-between text-sm">
                            <span class="text-gray-600 dark:text-gray-300">Interval:</span>
                            <span class="font-medium dark:text-gray-200">30 seconds</span>
                        </div>
                        <div class="flex justify-between text-sm">
                            <span class="text-gray-600 dark:text-gray-300">Last Run:</span>
                            <span class="font-medium dark:text-gray-200">2 mins ago</span>
                        </div>
                    </div>
                    <div class="mt-4 pt-4 border-t dark:border-gray-600">
                        <div class="flex justify-between text-sm">
                            <span class="text-gray-600 dark:text-gray-300">Records today:</span>
                            <span class="font-medium text-blue-600 dark:text-blue-400">423</span>
                        </div>
                    </div>
                    <div class="mt-4">
                        <button hx-get="/api/pipeline/details/1" hx-target="#pipeline-modal" hx-swap="innerHTML" class="w-full bg-gray-100 text-gray-800 py-2 rounded-lg hover:bg-gray-200 transition text-sm dark:bg-gray-600 dark:text-gray-200 dark:hover:bg-gray-500">
                            <i class="fas fa-info-circle mr-2"></i>View Details
                        </button>
                    </div>
                </div>
            </div>

            <!-- Pipeline 2 -->
            <div class="pipeline-card bg-white rounded-lg shadow dark:bg-gray-700">
                <div class="p-6">
                    <div class="flex justify-between items-start mb-4">
                        <div>
                            <h3 class="text-lg font-semibold text-gray-900 dark:text-white">HTTP Default</h3>
                            <p class="text-sm text-gray-600 dark:text-gray-300">HTTP → File</p>
                        </div>
                        <div class="flex items-center">
                            <span class="pulse-dot w-2 h-2 bg-green-500 rounded-full mr-2"></span>
                            <span class="text-sm text-green-600 font-medium dark:text-green-400">Active</span>
                        </div>
                    </div>
                    <div class="space-y-3">
                        <div class="flex justify-between text-sm">
                            <span class="text-gray-600 dark:text-gray-300">Source:</span>
                            <span class="font-medium dark:text-gray-200">Default HTTP</span>
                        </div>
                        <div class="flex justify-between text-sm">
                            <span class="text-gray-600 dark:text-gray-300">Destination:</span>
                            <span class="font-medium dark:text-gray-200">./tests/data/stream/</span>
                        </div>
                        <div class="flex justify-between text-sm">
                            <span class="text-gray-600 dark:text-gray-300">Interval:</span>
                            <span class="font-medium dark:text-gray-200">60 seconds</span>
                        </div>
                        <div class="flex justify-between text-sm">
                            <span class="text-gray-600 dark:text-gray-300">Last Run:</span>
                            <span class="font-medium dark:text-gray-200">1 min ago</span>
                        </div>
                    </div>
                    <div class="mt-4 pt-4 border-t dark:border-gray-600">
                        <div class="flex justify-between text-sm">
                            <span class="text-gray-600 dark:text-gray-300">Records today:</span>
                            <span class="font-medium text-blue-600 dark:text-blue-400">567</span>
                        </div>
                    </div>
                    <div class="mt-4">
                        <button hx-get="/api/pipeline/details/2" hx-target="#pipeline-modal" hx-swap="innerHTML" class="w-full bg-gray-100 text-gray-800 py-2 rounded-lg hover:bg-gray-200 transition text-sm dark:bg-gray-600 dark:text-gray-200 dark:hover:bg-gray-500">
                            <i class="fas fa-info-circle mr-2"></i>View Details
                        </button>
                    </div>
                </div>
            </div>

            <!-- Pipeline 3 -->
            <div class="pipeline-card bg-white rounded-lg shadow dark:bg-gray-700">
                <div class="p-6">
                    <div class="flex justify-between items-start mb-4">
                        <div>
                            <h3 class="text-lg font-semibold text-gray-900 dark:text-white">PDF Fetch</h3>
                            <p class="text-sm text-gray-600 dark:text-gray-300">HTTP → File</p>
                        </div>
                        <div class="flex items-center">
                            <span class="pulse-dot w-2 h-2 bg-yellow-500 rounded-full mr-2"></span>
                            <span class="text-sm text-yellow-600 font-medium dark:text-yellow-400">Warning</span>
                        </div>
                    </div>
                    <div class="space-y-3">
                        <div class="flex justify-between text-sm">
                            <span class="text-gray-600 dark:text-gray-300">Source:</span>
                            <span class="font-medium dark:text-gray-200">arxiv.org</span>
                        </div>
                        <div class="flex justify-between text-sm">
                            <span class="text-gray-600 dark:text-gray-300">Destination:</span>
                            <span class="font-medium dark:text-gray-200">./tests/data/stream/</span>
                        </div>
                        <div class="flex justify-between text-sm">
                            <span class="text-gray-600 dark:text-gray-300">Interval:</span>
                            <span class="font-medium dark:text-gray-200">5 minutes</span>
                        </div>
                        <div class="flex justify-between text-sm">
                            <span class="text-gray-600 dark:text-gray-300">Last Run:</span>
                            <span class="font-medium dark:text-gray-200">15 mins ago</span>
                        </div>
                    </div>
                    <div class="mt-4 pt-4 border-t dark:border-gray-600">
                        <div class="flex justify-between text-sm">
                            <span class="text-gray-600 dark:text-gray-300">Records today:</span>
                            <span class="font-medium text-blue-600 dark:text-blue-400">257</span>
                        </div>
                    </div>
                    <div class="mt-4">
                        <button hx-get="/api/pipeline/details/3" hx-target="#pipeline-modal" hx-swap="innerHTML" class="w-full bg-gray-100 text-gray-800 py-2 rounded-lg hover:bg-gray-200 transition text-sm dark:bg-gray-600 dark:text-gray-200 dark:hover:bg-gray-500">
                            <i class="fas fa-info-circle mr-2"></i>View Details
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Metrics Section -->
<div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8">
    <div class="bg-white rounded-lg shadow p-6 dark:bg-gray-700">
        <div class="flex justify-between items-center mb-4">
            <h3 class="text-lg font-semibold text-gray-900 dark:text-white">Throughput (Records/Hour)</h3>
            <button hx-get="/api/metrics/throughput" hx-target="#throughput-chart" hx-swap="innerHTML" class="text-sm text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300">
                <i class="fas fa-sync mr-1"></i> Refresh
            </button>
        </div>
        <div id="throughput-chart">
            <canvas id="throughputChart" width="400" height="200"></canvas>
        </div>
    </div>
    <div class="bg-white rounded-lg shadow p-6 dark:bg-gray-700">
        <div class="flex justify-between items-center mb-4">
            <h3 class="text-lg font-semibold text-gray-900 dark:text-white">Processing Time (ms)</h3>
            <button hx-get="/api/metrics/processing-time" hx-target="#processing-time-chart" hx-swap="innerHTML" class="text-sm text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300">
                <i class="fas fa-sync mr-1"></i> Refresh
            </button>
        </div>
        <div id="processing-time-chart">
            <canvas id="processingTimeChart" width="400" height="200"></canvas>
        </div>
    </div>
</div>

<!-- Recent Activity -->
<div class="bg-white rounded-lg shadow dark:bg-gray-700">
    <div class="p-6">
        <div class="flex justify-between items-center mb-4">
            <h3 class="text-lg font-semibold text-gray-900 dark:text-white">Recent Activity</h3>
            <button hx-get="/api/activity" hx-target="#activity-list" hx-swap="innerHTML" class="text-sm text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300">
                <i class="fas fa-sync mr-1"></i> Refresh
            </button>
        </div>
        <div id="activity-list">
            <div class="space-y-3">
                <div class="flex items-center justify-between py-2 border-b dark:border-gray-600">
                    <div class="flex items-center">
                        <i class="fas fa-check-circle text-green-500 mr-3"></i>
                        <div>
                            <p class="text-sm font-medium text-gray-900 dark:text-white">SpaceDev News pipeline completed</p>
                            <p class="text-xs text-gray-600 dark:text-gray-400">423 records processed</p>
                        </div>
                    </div>
                    <span class="text-xs text-gray-500 dark:text-gray-400">2 mins ago</span>
                </div>
                <div class="flex items-center justify-between py-2 border-b dark:border-gray-600">
                    <div class="flex items-center">
                        <i class="fas fa-check-circle text-green-500 mr-3"></i>
                        <div>
                            <p class="text-sm font-medium text-gray-900 dark:text-white">HTTP Default pipeline completed</p>
                            <p class="text-xs text-gray-600 dark:text-gray-400">567 records processed</p>
                        </div>
                    </div>
                    <span class="text-xs text-gray-500 dark:text-gray-400">1 min ago</span>
                </div>
                <div class="flex items-center justify-between py-2 border-b dark:border-gray-600">
                    <div class="flex items-center">
                        <i class="fas fa-exclamation-triangle text-yellow-500 mr-3"></i>
                        <div>
                            <p class="text-sm font-medium text-gray-900 dark:text-white">PDF Fetch pipeline warning</p>
                            <p class="text-xs text-gray-600 dark:text-gray-400">Slow response from source</p>
                        </div>
                    </div>
                    <span class="text-xs text-gray-500 dark:text-gray-400">15 mins ago</span>
                </div>
                <div class="flex items-center justify-between py-2">
                    <div class="flex items-center">
                        <i class="fas fa-info-circle text-blue-500 mr-3"></i>
                        <div>
                            <p class="text-sm font-medium text-gray-900 dark:text-white">Scheduler started</p>
                            <p class="text-xs text-gray-600 dark:text-gray-400">All 3 pipelines initialized</p>
                        </div>
                    </div>
                    <span class="text-xs text-gray-500 dark:text-gray-400">1 hour ago</span>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    // Mock data for charts
    const throughputData = {
        labels: ['00:00', '04:00', '08:00', '12:00', '16:00', '20:00', '24:00'],
        datasets: [{
            label: 'Records Processed',
            data: [120, 150, 180, 220, 280, 240, 190],
            borderColor: 'rgb(59, 130, 246)',
            backgroundColor: 'rgba(59, 130, 246, 0.1)',
            tension: 0.4
        }]
    };

    const processingTimeData = {
        labels: ['00:00', '04:00', '08:00', '12:00', '16:00', '20:00', '24:00'],
        datasets: [{
            label: 'Processing Time (ms)',
            data: [200, 180, 220, 260, 234, 210, 195],
            borderColor: 'rgb(16, 185, 129)',
            backgroundColor: 'rgba(16, 185, 129, 0.1)',
            tension: 0.4
        }]
    };

    // Initialize charts
    const throughputCtx = document.getElementById('throughputChart').getContext('2d');
    new Chart(throughputCtx, {
        type: 'line',
        data: throughputData,
        options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
                legend: {
                    display: false
                }
            },
            scales: {
                y: {
                    beginAtZero: true
                }
            }
        }
    });

    const processingTimeCtx = document.getElementById('processingTimeChart').getContext('2d');
    new Chart(processingTimeCtx, {
        type: 'line',
        data: processingTimeData,
        options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
                legend: {
                    display: false
                }
            },
            scales: {
                y: {
                    beginAtZero: true
                }
            }
        }
    });
</script>